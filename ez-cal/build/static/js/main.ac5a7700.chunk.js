(this["webpackJsonpez-cal"]=this["webpackJsonpez-cal"]||[]).push([[0],{30:function(e,t,a){e.exports=a(47)},40:function(e,t,a){},41:function(e){e.exports=JSON.parse('{"clientId":"1029216905931-isk3ofi2ivt4u8csbfnmm3ugfkeatpqq.apps.googleusercontent.com","apiKey":"AIzaSyDZzj4QwsGSpJmXRiVjuqgAq-5YB9EoxrE","scope":"https://www.googleapis.com/auth/calendar","discoveryDocs":["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}')},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(26),r=a(15),l=a(7),c=a(8),o=a(10),u=a(9),d=a(11),m=a(29),h=a(2),g=a(16),v=a.n(g);a(35),a(37);v.a.initializeApp({apiKey:"AIzaSyDZzj4QwsGSpJmXRiVjuqgAq-5YB9EoxrE",authDomain:"ezcal-2394a.firebaseapp.com",databaseURL:"https://ezcal-2394a.firebaseio.com",projectId:"ezcal-2394a",storageBucket:"ezcal-2394a.appspot.com",messagingSenderId:"1029216905931",appId:"1:1029216905931:web:33ccd473548edd99ecc94e"});v.a.auth.GoogleAuthProvider.PROVIDER_ID;var p=v.a.database().ref("users"),y=Array(Math.ceil(15)).fill(9).map((function(e,t){return e+t})).flatMap((function(e){return[":00",":15",":30",":45"].map((function(t){return e+t}))})).concat("0:00"),b=y.filter((function(e){return"00"===e.split(":")[1]})),f=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).copyCode=function(){var e=document.createElement("textarea");e.value=a.props.link,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),a.setState({copied:"Copied!"})},a.open=function(){a.setState({show:!0})},a.close=function(){a.setState({show:!1,copied:"Copy"})},a.state={show:!1,copied:"Copy"},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("button",{onClick:this.open,className:"sendInvite"}),this.state.show?i.a.createElement("div",{className:"modalBackdrop"},i.a.createElement("div",{className:"modalContainer"},i.a.createElement("div",{className:"closeButtonWrapper"},i.a.createElement("button",{onClick:this.close,className:"closeButton"}),i.a.createElement("div",null,this.props.link),i.a.createElement("button",{onClick:this.copyCode,className:"copyButton"},this.state.copied)))):null)}}]),t}(n.Component),E=a(12),C=(a(40),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).open=function(){a.setState({show:!0})},a.close=function(){a.setState({show:!1})};var n=(new Date).toISOString().substring(0,11);return console.log(n),a.state={show:!1,event:"",starttime:n+"12:00",endtime:n+"13:00"},a.handleEvent=a.handleEvent.bind(Object(h.a)(a)),a.handleStarttime=a.handleStarttime.bind(Object(h.a)(a)),a.handleEndtime=a.handleEndtime.bind(Object(h.a)(a)),a.upload=a.upload.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleEvent",value:function(e){this.setState({event:e.target.value})}},{key:"handleStarttime",value:function(e){var t=e.target.value;this.setState({starttime:t})}},{key:"handleEndtime",value:function(e){var t=e.target.value;this.setState({endtime:t})}},{key:"upload",value:function(){this.props.createEvent(this.state.event,this.state.starttime+":00",this.state.endtime+":00")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("button",{onClick:this.open,className:"addEvent"}),this.state.show?i.a.createElement("div",{className:"modalBackdropAdd"},i.a.createElement("div",{className:"modalContainerAdd"},i.a.createElement("div",{className:"closeButtonWrapper"},i.a.createElement("button",{onClick:this.close,className:"closeButton"}),i.a.createElement("div",null,i.a.createElement("div",null,"Event Title:"),i.a.createElement("input",{type:"text",onChange:this.handleEvent}),i.a.createElement("div",null,"Start Time:"),i.a.createElement("input",{type:"datetime-local",value:this.state.starttime,onChange:this.handleStarttime}),i.a.createElement("div",null,"End Time:"),i.a.createElement("input",{type:"datetime-local",value:this.state.endtime,onChange:this.handleEndtime})),i.a.createElement("button",{onClick:this.upload,className:"copyButton"},"Create Event")))):null)}}]),t}(i.a.Component)),S=a(41),N=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=window.location.pathname.substring(1);e&&(p.child(e).child("userName").once("value",a.printUserName,(function(e){return alert(e)})),p.child(e).child("calID").once("value",a.setOtherID,(function(e){return alert(e)})),p.child(e).child("events").once("value",a.handleData,(function(e){return alert(e)})))},a.printUserName=function(e){e.val()&&a.setState({otherUser:e.val()})},a.setOtherID=function(e){e.val()&&a.setState({otherCalID:e.val()})},a.handleData=function(e){e.val()&&a.state.otherUser&&a.setBusy2(Object.values(e.val(),a.state.otherUser))},a.checkLastDay=function(e,t){var a;if(4==e||6==e||9==e||11==e)a=30;else if(2==e){a=function(e){return e%4==0&&e%100!=0||e%400==0}(t)?29:28}else a=31;return a},a.buildDayList=function(){for(var e=new Date,t=a.checkLastDay(e.getMonth()+1,e.getFullYear()),n=["Su","M","Tu","W","Th","F","Sa"],i=[],s=[],r=0;r<7;r++)i.push(n[(e.getDay()+r)%7]),e.getDate()+r>t?s.push((e.getDate()+r)%t):s.push(e.getDate()+r);return[i,s]},a.dayGrid=function(){var e=a.buildDayList(),t=Object(m.a)(e,2),n=t[0],s=t[1],r=y.slice(0,y.length-1).map((function(e){return"00"===e.split(":")[1]?i.a.createElement("div",{className:"dayTime"},e):i.a.createElement("div",{className:"dayTime"})})),l=[];l.push(i.a.createElement("div",{className:"dayCol"},i.a.createElement("div",{className:"dayEmpty"}),r));for(var c=0;c<n.length;c++){for(var o=[],u=0;u<y.length;u++)"0:00"===y[u]?o.push(i.a.createElement("div",{id:"".concat(s[c]," ").concat(y[u]),styles:{display:"hidden"}})):b.includes(y[u])?o.push(i.a.createElement("div",{id:"".concat(s[c]," ").concat(y[u]),className:"dayHour"})):o.push(i.a.createElement("div",{id:"".concat(s[c]," ").concat(y[u]),className:"daySubHour"}));l.push(i.a.createElement("div",{className:"dayCol"},i.a.createElement("div",{className:"dayHead"},n[c],i.a.createElement("div",{className:"dayDate"},s[c])),o))}return i.a.createElement("div",{className:"dayWrapper"},l)},a.SharedCalendar=function(){return i.a.createElement("div",null,a.dayGrid())},a.MyCalendar=function(){return i.a.createElement("div",null,a.dayGrid())},a.Main=function(){return i.a.createElement(E.c,null,i.a.createElement(E.a,{exact:!0,path:"/",component:a.MyCalendar}),i.a.createElement(E.a,{path:window.location.pathname,component:a.SharedCalendar}))},a.setLink=function(e){return window.location.href+e},a.showEvents=function(){var e;a.sign&&a.listUpcomingEvents().then((function(t){var n=t.result;e=n.items,a.setState({uid:a.getUserID(),userName:a.getUserName()}),p.child(a.getUserID()).child("events").set(e),p.child(a.getUserID()).child("userName").set(a.getUserName()),p.child(a.getUserID()).child("calID").set(a.getEmail()),a.setBusy(e)}))},a.setBusy=function(e){var t=window.location.pathname.substring(1);if(t){if(t&&a.state.uid)for(var n=0;n<e.length;n++)if(e[n].start.dateTime){var i=e[n].start.dateTime.substring(8,10);"0"===i.substring(0,1)&&(i=i.substring(1));var s=e[n].start.dateTime.substring(11,16),r=e[n].end.dateTime.substring(11,16);"0"===s.substring(0,1)&&(s=s.substring(1)),"0"===r.substring(0,1)&&(r=r.substring(1));for(var l=y.indexOf(s),c=y.indexOf(r),o=l;o<c;o++){var u=document.getElementById("".concat(i," ").concat(y[o]));u.className.includes("FriendBusy")?u.className.includes("Sub")?u.className="daySubHourOverlapBusy":u.className="dayHourOverlapBusy":u.className+="Busy"}}}else for(var d=0;d<e.length;d++)if(e[d].start.dateTime){var m=e[d].start.dateTime.substring(8,10);"0"===m.substring(0,1)&&(m=m.substring(1));var h=e[d].start.dateTime.substring(11,16),g=e[d].end.dateTime.substring(11,16);"0"===h.substring(0,1)&&(h=h.substring(1)),"0"===g.substring(0,1)&&(g=g.substring(1));for(var v=y.indexOf(h),p=y.indexOf(g),b=v;b<p;b++){var f=document.getElementById("".concat(m," ").concat(y[b]));f.className.includes("Busy")||(f.className+="Busy")}}},a.setBusy2=function(e,t){for(var a=0;a<e.length;a++){var n=e[a].start.dateTime.substring(8,10);if("0"===n.substring(0,1)&&(n=n.substring(1)),n>=(new Date).getDate()){var i=e[a].start.dateTime.substring(11,16),s=e[a].end.dateTime.substring(11,16);"0"===i.substring(0,1)&&(i=i.substring(1)),"0"===s.substring(0,1)&&(s=s.substring(1));for(var r=y.indexOf(i),l=y.indexOf(s),c=r;c<l;c++){var o=document.getElementById("".concat(n," ").concat(y[c]));o.className.includes("Busy")||(o.className+="FriendBusy")}}}},a.setFree=function(){for(var e,t,a,n,i,s;document.getElementsByClassName("dayHourBusy").length>0;)(e=document.getElementsByClassName("dayHourBusy")[0]).className="dayHour",e.innerHTML="";for(;document.getElementsByClassName("daySubHourBusy").length>0;)(t=document.getElementsByClassName("daySubHourBusy")[0]).className="daySubHour",t.innerHTML="";for(;document.getElementsByClassName("dayHourFriendBusy").length>0;)(a=document.getElementsByClassName("dayHourFriendBusy")[0]).className="dayHour",a.innerHTML="";for(;document.getElementsByClassName("daySubHourFriendBusy").length>0;)(n=document.getElementsByClassName("daySubHourFriendBusy")[0]).className="daySubHour",n.innerHTML="";for(;document.getElementsByClassName("daySubHourOverlapBusy").length>0;)(i=document.getElementsByClassName("daySubHourOverlapBusy")[0]).className="dayHour",i.innerHTML="";for(;document.getElementsByClassName("dayHourOverlapBusy").length>0;)(s=document.getElementsByClassName("dayHourOverlapBusy")[0]).className="daySubHour",s.innerHTML=""},a.Login=function(){a.handleAuthClick()},a.Logout=function(){a.handleSignoutClick(),a.setState({uid:null,userName:null})},a.state={uid:null,userName:null,otherUser:null,otherCalID:null},a.sign=!1,a.gapi=null,a.onLoadCallback=null,a.calendar="primary";try{a.updateSigninStatus=a.updateSigninStatus.bind(Object(h.a)(a)),a.initClient=a.initClient.bind(Object(h.a)(a)),a.handleSignoutClick=a.handleSignoutClick.bind(Object(h.a)(a)),a.handleAuthClick=a.handleAuthClick.bind(Object(h.a)(a)),a.createEvent=a.createEvent.bind(Object(h.a)(a)),a.listUpcomingEvents=a.listUpcomingEvents.bind(Object(h.a)(a)),a.createEventFromNow=a.createEventFromNow.bind(Object(h.a)(a)),a.listenSign=a.listenSign.bind(Object(h.a)(a)),a.onLoad=a.onLoad.bind(Object(h.a)(a)),a.setCalendar=a.setCalendar.bind(Object(h.a)(a)),a.handleClientLoad(),a.testcreateEvent=a.testcreateEvent.bind(Object(h.a)(a))}catch(n){console.log(n)}return a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateSigninStatus",value:function(e){this.sign=e,this.getUserID()&&this.showEvents()}},{key:"initClient",value:function(){var e=this;this.gapi=window.gapi,this.gapi.client.init(S).then((function(){e.gapi.auth2.getAuthInstance().isSignedIn.listen(e.updateSigninStatus),e.updateSigninStatus(e.gapi.auth2.getAuthInstance().isSignedIn.get()),e.onLoadCallback&&e.onLoadCallback()})).catch((function(e){console.log(e)}))}},{key:"handleClientLoad",value:function(){var e=this;this.gapi=window.gapi;var t=document.createElement("script");t.src="https://apis.google.com/js/api.js",document.body.appendChild(t),t.onload=function(){window.gapi.load("client:auth2",e.initClient)}}},{key:"getUserID",value:function(){return this.gapi.auth2.getAuthInstance().currentUser.Ab.El}},{key:"getUserName",value:function(){return this.gapi.auth2.getAuthInstance().currentUser.Ab.w3.ig}},{key:"getEmail",value:function(){return this.gapi.auth2.getAuthInstance().currentUser.Ab.w3.U3}},{key:"handleAuthClick",value:function(){this.gapi?this.gapi.auth2.getAuthInstance().signIn():console.log("Error: this.gapi not loaded")}},{key:"setCalendar",value:function(e){this.calendar=e}},{key:"listenSign",value:function(e){this.gapi?this.gapi.auth2.getAuthInstance().isSignedIn.listen(e):console.log("Error: this.gapi not loaded")}},{key:"onLoad",value:function(e){this.gapi?e():this.onLoadCallback=e}},{key:"handleSignoutClick",value:function(){if(this.gapi){this.gapi.auth2.getAuthInstance().signOut(),this.setFree();var e=window.location.pathname.substring(1);e&&p.child(e).child("events").once("value",this.handleData,(function(e){return alert(e)}))}else console.log("Error: this.gapi not loaded")}},{key:"listUpcomingEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.calendar;if(this.gapi){var t=new Date;return t.setDate(t.getDate()+7),this.gapi.client.calendar.events.list({calendarId:e,timeMin:(new Date).toISOString(),timeMax:t.toISOString(),showDeleted:!1,singleEvents:!0,orderBy:"startTime"})}return console.log("Error: this.gapi not loaded"),!1}},{key:"createEventFromNow",value:function(e){var t=e.time,a=e.summary,n=e.description,i=void 0===n?"":n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar,r={summary:a,description:i,start:{dateTime:(new Date).toISOString(),timeZone:"Europe/Paris"},end:{dateTime:new Date((new Date).getTime()+6e4*t),timeZone:"Europe/Paris"}};return this.gapi.client.calendar.events.insert({calendarId:s,resource:r})}},{key:"createEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;return this.gapi.client.calendar.events.insert({calendarId:t,resource:e})}},{key:"testcreateEvent",value:function(e,t,a){var n={summary:e,description:"",start:{dateTime:t,timeZone:"America/Chicago"},end:{dateTime:a,timeZone:"America/Chicago"},attendees:this.state.otherCalID?[{email:this.state.otherCalID}]:[]};this.gapi.client.calendar.events.insert({calendarId:this.calendar,resource:n}).execute(),window.location.reload()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.uid?i.a.createElement("button",{onClick:function(){return e.Logout()}},"Sign out"):null,this.state.uid?i.a.createElement("div",null,"Welcome, ",this.state.userName,"!"):i.a.createElement("button",{onClick:function(){e.Login()}},"Sync with Google"),this.state.userName&&!this.state.otherUser?i.a.createElement(f,{link:this.setLink(this.state.uid)}):null,i.a.createElement(C,{createEvent:this.testcreateEvent}),this.Main())}}]),t}(n.Component);try{new N}catch(k){console.log(k)}a(46);var w=function(e){function t(e){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement(N,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(s.render)(i.a.createElement(r.a,null,i.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.ac5a7700.chunk.js.map